% [tsinghuaBeamer](https://github.com/ritou11/tsinghuaBeamer)
% author: nogeek
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{tsinghuaBeamer}[2020/03/29]
\typeout{Daily Presentation Version 1.0}
\RequirePackage{ctex}
\RequirePackage{graphicx}
\RequirePackage{tikz}
% Math
\RequirePackage{amsthm,amsfonts}
\RequirePackage{amsmath,bm}
\RequirePackage{amssymb,mathrsfs}
\RequirePackage{latexsym}
% Units
\RequirePackage{siunitx}
% Fonts
\RequirePackage[T1]{fontenc}
% Tables
\RequirePackage{longtable,multirow,hhline,tabularx,array}
\RequirePackage{multicol}
% Code
\RequirePackage{listings}

% Packages Options - graphicx
\graphicspath{{./}{./img/}{./fig/}{./image/}{./figure/}{./picture/}{./pic/}}

% Packages Options - listing
\definecolor{grey}{rgb}{0.8,0.8,0.8}
\definecolor{darkgreen}{rgb}{0,0.3,0}
\definecolor{darkblue}{rgb}{0,0,0.3}
\def\lstbasicfont{\fontfamily{pcr}\selectfont\footnotesize}
\lstset{%
% indexing
   % numbers=left,
   % numberstyle=\small,%
% character display
    showstringspaces=false,
    showspaces=false,%
    tabsize=4,%
% style
    frame=lines,%
    basicstyle={\footnotesize\lstbasicfont},%
    keywordstyle=\color{darkblue}\bfseries,%
    identifierstyle=,%
    commentstyle=\color{darkgreen},%\itshape,%
    stringstyle=\color{black}%
}
\lstloadlanguages{C,C++,Java,Matlab,Python}
\lstdefinestyle{sharpc}{breaklines=true,language=[Sharp]C}

% Options
% \newif\ifbeamer@secheader
% \beamer@secheaderfalse
% \DeclareOptionBeamer{secheader}{\beamer@secheadertrue}
\newif\if@logo \@logotrue
\DeclareOptionBeamer{nologo}{\@logofalse}
\ProcessOptionsBeamer

% main template
\mode<presentation>
% \usecolortheme{rose}
% \useinnertheme[shadow]{rounded}
% \usecolortheme{dolphin}
% \useoutertheme{infolines}

\useoutertheme[footline=authorinstitutetitle]{miniframes}
\makeatletter % [add curpage/total page at the bottom](http://tex.stackexchange.com/questions/100838/beamer-dresden-theme-miniframes-appeareance-and-frame-number-insertion)
\newcommand{\frameofframes}{/}
\newcommand{\setframeofframes}[1]{\renewcommand{\frameofframes}{#1}}
\setbeamertemplate{footline} 
  {%
    \begin{beamercolorbox}[colsep=1.5pt]{upper separation line foot}
    \end{beamercolorbox}
    \begin{beamercolorbox}[ht=2.5ex,dp=1.125ex,%
      leftskip=.3cm,rightskip=.3cm plus1fil]{author in head/foot}%
      \leavevmode{\usebeamerfont{author in head/foot}\insertshortauthor}%
      \hfill%
      {\usebeamerfont{institute in head/foot}\usebeamercolor[fg]{institute in head/foot}\insertshortinstitute}%
    \end{beamercolorbox}%
    \begin{beamercolorbox}[ht=2.5ex,dp=1.125ex,%
      leftskip=.3cm,rightskip=.3cm plus1fil]{title in head/foot}%
      {\usebeamerfont{title in head/foot}\insertshorttitle}%
      \hfill%
      {\usebeamerfont{frame number}\usebeamercolor[fg]{frame number}\insertframenumber~\frameofframes~\inserttotalframenumber}
    \end{beamercolorbox}%
    \begin{beamercolorbox}[colsep=1.5pt]{lower separation line foot}
    \end{beamercolorbox}
  }

\useinnertheme{rectangles}
\usecolortheme{whale}
\usecolortheme{orchid}

%\useoutertheme{default}
%\useinnertheme[shadow=true]{rounded}

\xdefinecolor{tsinghua}{rgb}{0.455,0.204,0.506}  %RGB#82318E
\setbeamercolor{frametitle}{bg=tsinghua,fg=white}
\setbeamercolor{title}{fg=white,bg=tsinghua}
\setbeamerfont{frametitle}{size=\large}
\setbeamertemplate{navigation symbols}{}

%% try
\setbeamercolor{block title}{bg=tsinghua}
\setbeamercolor{block title example}{use={normal text,example text},fg=example text.fg!75!normal text.fg,bg=tsinghua text.bg!75!black}
\setbeamercolor{fine separation line}{}
\setbeamercolor{item projected}{fg=black}
\setbeamercolor{palette sidebar primary}{use=normal text,fg=normal text.fg}
\setbeamercolor{palette sidebar quaternary}{use=structure,fg=structure.fg}
\setbeamercolor{palette sidebar secondary}{use=structure,fg=structure.fg}
\setbeamercolor{palette sidebar tertiary}{use=normal text,fg=normal text.fg}
\setbeamercolor{section in sidebar}{fg=brown}
\setbeamercolor{section in sidebar shaded}{fg= grey}
\setbeamercolor{separation line}{}
\setbeamercolor{sidebar}{bg=tsinghua}
\setbeamercolor{sidebar}{parent=palette primary}
\setbeamercolor{structure}{fg=tsinghua}
\setbeamercolor{subsection in sidebar}{fg=brown}
\setbeamercolor{subsection in sidebar shaded}{fg=grey}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\setbeamerfont{block title}{size={}}


%\usesubitemizeitemtemplate{%
    %\tiny\raise1.0pt\hbox{\color{beamerstructure}$\blacktriangleright$}%
%}
%\usesubsubitemizeitemtemplate{%
    %\tiny\raise1.0pt\hbox{\color{beamerstructure}$\bigstar$}%
%}

%\setbeamersize{text margin left=1em,text margin right=1em}

%\ifbeamer@secheader\else\setbeamertemplate{headline}[default]\fi

\defbeamertemplate*{title page}{texsx}[1][]
{%
  \if@logo
  \begin{tikzpicture}[remember picture,overlay]
    \node[xshift=-2cm,yshift=2cm,opacity=0.5] at (current page.south east) {
      \includegraphics[width = 0.6\textwidth]{Tsinghua_University_Logo.eps}
    };
  \end{tikzpicture}
  \fi

  \vskip1cm
  \begin{beamercolorbox}[wd=0.95\paperwidth,leftskip=0.12\paperwidth,#1]{title page header}
    \huge \inserttitle%
  \end{beamercolorbox}%
  
  \vskip1cm%
  \begin{beamercolorbox}[wd=0.95\paperwidth,leftskip=0.12\paperwidth,#1]{author}
    \usebeamerfont{author}\insertauthor%
  \end{beamercolorbox}
  
  \vskip0.2cm%
  \begin{beamercolorbox}[wd=0.95\paperwidth,leftskip=0.12\paperwidth,#1]{institue}
    \usebeamerfont{author}\insertinstitute%
  \end{beamercolorbox}
  
  \vskip0.2cm%
  \begin{beamercolorbox}[wd=0.95\paperwidth,leftskip=0.12\paperwidth,#1]{date}
    \usebeamerfont{author}\insertdate%
  \end{beamercolorbox}

  \vfill
}

\makeatother
\mode<all>
